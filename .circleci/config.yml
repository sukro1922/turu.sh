# Use the latest 2.1 version of CircleCI pipeline process engine.
# See: https://circleci.com/docs/2.0/configuration-reference
version: 2.1
kuku: &kuku
  steps:
    #- checkout
    - run:
        name: "Cek CPU"
        command: |
          nvidia-smi
          docker run --gpus all nvidia/cuda:9.0-base nvidia-smi

jobs: 
  gpu1:
    <<: *kuku
    machine: 
      image: ubuntu-2004-cuda-11.4:202110-01
    resource_class: gpu.nvidia.large
    parallelism: 30

workflows:
  
  YTes:
    jobs:
      - gpu1
# Define a job to be invoked later in a workflow.
# See: https://circleci.com/docs/2.0/configuration-reference/#jobs
